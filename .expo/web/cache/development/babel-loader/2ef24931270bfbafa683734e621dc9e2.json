{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/admin/Documents/SignalClone/components/MessageInput/MessageInput.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { SimpleLineIcons, Feather, MaterialCommunityIcons, AntDesign, Ionicons } from '@expo/vector-icons';\nimport { DataStore } from '@aws-amplify/datastore';\nimport { ChatRoom, Message } from \"../../src/models\";\nimport { Auth } from 'aws-amplify';\n\nvar MessageInput = function MessageInput(_ref) {\n  var chatRoom = _ref.chatRoom;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var sendMessage = function sendMessage() {\n    var user, newMessage;\n    return _regeneratorRuntime.async(function sendMessage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Auth.currentAuthenticatedUser());\n\n          case 2:\n            user = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(DataStore.save(new Message({\n              content: message,\n              userID: user.attributes.sub,\n              chatroomID: chatRoom.id\n            })));\n\n          case 5:\n            newMessage = _context.sent;\n            updateLastMessage(newMessage);\n            setMessage('');\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var updateLastMessage = function updateLastMessage(newMessage) {\n    return _regeneratorRuntime.async(function updateLastMessage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            DataStore.save(ChatRoom.copyOf(chatRoom, function (updatedChatRoom) {\n              updatedChatRoom.LastMessage = newMessage;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onPlusClicked = function onPlusClicked() {\n    console.warn(\"On plus clicked\");\n  };\n\n  var onPress = function onPress() {\n    if (message) {\n      sendMessage();\n    } else {\n      onPlusClicked();\n    }\n  };\n\n  return React.createElement(KeyboardAvoidingView, {\n    style: styles.root,\n    behavior: Platform.OS === \"ios\" ? \"padding\" : \"height\",\n    keyboardVerticalOffset: 100,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.inputContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, React.createElement(SimpleLineIcons, {\n    name: \"emotsmile\",\n    size: 24,\n    color: \"#595959\",\n    style: styles.icon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.input,\n    value: message,\n    onChangeText: setMessage,\n    placeholder: \"Signal message...\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }), React.createElement(Feather, {\n    name: \"camera\",\n    size: 24,\n    color: \"#595959\",\n    style: styles.icon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }), React.createElement(MaterialCommunityIcons, {\n    name: \"microphone-outline\",\n    size: 24,\n    color: \"#595959\",\n    style: styles.icon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  })), React.createElement(Pressable, {\n    onPress: onPress,\n    style: styles.buttonContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, message ? React.createElement(Ionicons, {\n    name: \"send\",\n    size: 18,\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 20\n    }\n  }) : React.createElement(AntDesign, {\n    name: \"plus\",\n    size: 24,\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 71\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  root: {\n    flexDirection: 'row',\n    padding: 10\n  },\n  inputContainer: {\n    backgroundColor: '#f2f2f2',\n    flex: 1,\n    marginRight: 10,\n    borderRadius: 25,\n    borderWidth: 1,\n    borderColor: '#dedede',\n    alignItems: 'center',\n    flexDirection: 'row',\n    padding: 5\n  },\n  input: {\n    flex: 1,\n    marginHorizontal: 5\n  },\n  icon: {\n    marginHorizontal: 5\n  },\n  buttonContainer: {\n    width: 40,\n    height: 40,\n    backgroundColor: '#3777f0',\n    borderRadius: 25,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 35\n  }\n});\nexport default MessageInput;","map":{"version":3,"sources":["/Users/admin/Documents/SignalClone/components/MessageInput/MessageInput.tsx"],"names":["React","useState","SimpleLineIcons","Feather","MaterialCommunityIcons","AntDesign","Ionicons","DataStore","ChatRoom","Message","Auth","MessageInput","chatRoom","message","setMessage","sendMessage","currentAuthenticatedUser","user","save","content","userID","attributes","sub","chatroomID","id","newMessage","updateLastMessage","copyOf","updatedChatRoom","LastMessage","onPlusClicked","console","warn","onPress","styles","root","Platform","OS","inputContainer","icon","input","buttonContainer","StyleSheet","create","flexDirection","padding","backgroundColor","flex","marginRight","borderRadius","borderWidth","borderColor","alignItems","marginHorizontal","width","height","justifyContent","buttonText","color","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  TextInput, \n  Pressable, \n  KeyboardAvoidingView, \n  Platform \n} from 'react-native';\nimport { SimpleLineIcons, Feather, MaterialCommunityIcons, AntDesign, Ionicons } from '@expo/vector-icons'; \nimport { DataStore } from '@aws-amplify/datastore';\nimport { ChatRoom, Message } from '../../src/models';\nimport { Auth } from 'aws-amplify';\n\nconst MessageInput = ({ chatRoom }) => {\n  const [message, setMessage] = useState('');\n\n  const sendMessage = async () => {\n    // send message\n    const user = await Auth.currentAuthenticatedUser();\n    const newMessage = await DataStore.save(new Message({\n      content: message,\n      userID: user.attributes.sub,\n      chatroomID: chatRoom.id,\n    }))\n\n    updateLastMessage(newMessage);\n\n    setMessage('');\n  }\n\n  const updateLastMessage = async (newMessage) => {\n    DataStore.save(ChatRoom.copyOf(chatRoom, updatedChatRoom => {\n      updatedChatRoom.LastMessage = newMessage;\n    }))\n  }\n\n  const onPlusClicked = () => {\n    console.warn(\"On plus clicked\");\n  }\n\n  const onPress = () => {\n    if (message) {\n      sendMessage();\n    } else {\n      onPlusClicked();\n    }\n  }\n\n  return (\n    <KeyboardAvoidingView \n      style={styles.root} \n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      keyboardVerticalOffset={100}\n    >\n      <View style={styles.inputContainer}>\n        <SimpleLineIcons name=\"emotsmile\" size={24} color=\"#595959\" style={styles.icon} />\n        \n        <TextInput \n          style={styles.input}\n          value={message}\n          onChangeText={setMessage}\n          placeholder=\"Signal message...\"\n        />\n        \n        <Feather name=\"camera\" size={24} color=\"#595959\" style={styles.icon} />\n        <MaterialCommunityIcons name=\"microphone-outline\" size={24} color=\"#595959\" style={styles.icon} />\n      </View>\n      <Pressable onPress={onPress} style={styles.buttonContainer}>\n        {message ? <Ionicons name=\"send\" size={18} color=\"white\" /> : <AntDesign name=\"plus\" size={24} color=\"white\" />}\n      </Pressable>\n    </KeyboardAvoidingView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flexDirection: 'row',\n    padding: 10,\n  },\n  inputContainer: {\n    backgroundColor: '#f2f2f2',\n    flex: 1,\n    marginRight: 10,\n    borderRadius: 25,\n    borderWidth: 1,\n    borderColor: '#dedede',\n    alignItems: 'center',\n    flexDirection: 'row',\n    padding: 5,\n  },\n  input: {\n    flex: 1,\n    marginHorizontal: 5,\n  },\n  icon: {\n    marginHorizontal: 5,\n  },\n  buttonContainer: {\n    width: 40,\n    height: 40,\n    backgroundColor: '#3777f0',\n    borderRadius: 25,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 35,\n  }\n});\n\nexport default MessageInput"]},"metadata":{},"sourceType":"module"}